<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <!-- Card principal estilo Facebook -->
      <div class="card shadow-sm" style="background-color: #ffffff; border-radius: 8px;">
        <div class="card-header" style="background-color: #1877f2; color: white;">
          <h4 class="mb-0">
            <i class="bi bi-image-fill me-2"></i>
            Generador de Imágenes para Facebook
          </h4>
        </div>

        <div class="card-body p-4">
          <div class="row">
            <!-- Columna izquierda para input y descripción -->
            <div class="col-md-6">
              <div class="form-group mb-4">
                <label for="titulo" class="form-label fw-bold" style="color: #1c1e21;">¿Qué imagen quieres
                  crear?</label>
                <input type="text" id="titulo" class="form-control form-control-lg shadow-sm" [(ngModel)]="titulo"
                  placeholder="Describe la imagen que deseas generar..." [disabled]="cargando" />
              </div>

              <div class="d-grid gap-2 mb-4">
                <button class="btn btn-lg" (click)="generarImagen()" [disabled]="cargando || !titulo"
                  style="background-color: #1877f2; color: white;">
                  <span *ngIf="!cargando">
                    <i class="bi bi-stars me-2"></i>
                    Crear Imagen
                  </span>
                  <span *ngIf="cargando">
                    <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                    Generando imagen...
                  </span>
                </button>
              </div>

              <!-- Mensaje de error -->
              <div *ngIf="error" class="alert alert-danger">
                <i class="bi bi-exclamation-triangle-fill me-2"></i>
                {{ error }}
              </div>

              <!-- Descripción generada -->
              <div *ngIf="textoRespuesta" class="mt-4">
                <h6 class="fw-bold" style="color: #1c1e21;">Descripción de la imagen:</h6>
                <p class="text-muted">{{ textoRespuesta }}</p>
              </div>
            </div>

            <!-- Columna derecha para la imagen -->
            <div class="col-md-6">
              <div class="position-relative">
                <!-- Estado de carga -->
                <div *ngIf="cargando" class="text-center p-4 bg-light rounded" style="min-height: 300px;">
                  <div class="d-flex flex-column align-items-center justify-content-center h-100">
                    <div class="spinner-grow text-primary mb-3" role="status" style="width: 3rem; height: 3rem;">
                      <span class="visually-hidden">Cargando...</span>
                    </div>
                    <div class="loading-text mt-3">
                      <h6 class="mb-2">Generando tu imagen</h6>
                      <div class="progress" style="height: 5px; width: 200px;">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                          style="width: 100%"></div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Placeholder cuando no hay imagen y no está cargando -->
                <div *ngIf="!imagenBase64 && !cargando" class="text-center p-4 bg-light rounded"
                  style="min-height: 300px;">
                  <i class="bi bi-image text-muted" style="font-size: 4rem;"></i>
                  <p class="text-muted mt-3">La imagen generada aparecerá aquí</p>
                </div>

                <!-- Imagen generada -->
                <div *ngIf="imagenBase64" class="position-relative image-container">
                  <img [src]="imagenBase64" alt="Imagen generada" class="img-fluid rounded shadow-sm"
                    [class.fade-in]="imagenBase64" />

                  <!-- Marca de agua -->
                  <div class="position-absolute bottom-0 start-0 w-100 p-2 text-white text-center"
                    style="background: rgba(0,0,0,0.7); border-bottom-left-radius: 4px; border-bottom-right-radius: 4px;">
                    <small>
                      <i class="bi bi-google me-1"></i>
                      Generado con Google Gemini 2.0 Flash
                    </small>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>